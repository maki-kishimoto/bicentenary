<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Cache-busting headers for HTML to ensure browsers fetch fresh version -->
    <!-- Asset files (JS/CSS) use content hashing for proper caching -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>Choshu Five Spirits</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
  <script type="importmap">
{
  "imports": {
    "firebase/": "https://aistudiocdn.com/firebase@^12.4.0/",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.25.0"
  }
}
</script>
    <!-- Build version marker: This comment exists in source, gets modified by Vite during build -->
    <script>
      // Deployment verification: Check if we're running the built version
      // In the built version, Vite replaces the .tsx script tag with .js bundle
      // If we're seeing a .tsx reference in production, something is wrong with deployment
      (function() {
        if (typeof window !== 'undefined' && window.location.hostname !== 'localhost' && window.location.hostname !== '127.0.0.1' && !window.location.hostname.includes('127.0.0.1')) {
          // Check if the page has the built script tag or source script tag
          const scripts = document.getElementsByTagName('script');
          let hasTsxScript = false;
          let hasBuiltScript = false;
          
          for (let i = 0; i < scripts.length; i++) {
            const src = scripts[i].getAttribute('src') || '';
            if (src.includes('.tsx') || src.includes('.ts')) {
              hasTsxScript = true;
            }
            if (src.includes('/assets/') && src.includes('.js')) {
              hasBuiltScript = true;
            }
          }
          
          // If we find .tsx references and no built assets, we have a deployment problem
          if (hasTsxScript && !hasBuiltScript) {
            console.error('⚠️ DEPLOYMENT ERROR: Source HTML is being served instead of built version!');
            console.error('Please ensure GitHub Pages is configured correctly.');
            console.error('Go to: Repository Settings → Pages → Source: GitHub Actions');
            
            document.body.innerHTML = '<div style="font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, sans-serif; max-width: 800px; margin: 50px auto; padding: 30px; background: #fee2e2; border: 3px solid #dc2626; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);"><h1 style="color: #dc2626; margin-top: 0;">⚠️ Deployment Configuration Error</h1><p style="font-size: 18px; line-height: 1.6;"><strong>The website is not properly deployed.</strong></p><p style="line-height: 1.6;">Source files are being served instead of the built application, causing the browser to load TypeScript files with incorrect MIME types.</p><h2 style="color: #dc2626; margin-top: 30px;">To fix this issue:</h2><ol style="line-height: 1.8; font-size: 16px;"><li>Go to your <strong>GitHub repository settings</strong></li><li>Navigate to <strong>Settings → Pages</strong></li><li>Under <strong>Build and deployment</strong>, set <strong>Source</strong> to: <strong>GitHub Actions</strong> (NOT "Deploy from a branch")</li><li>Save the settings and wait for the deployment workflow to complete</li><li>Clear your browser cache and refresh this page</li></ol><div style="margin-top: 30px; padding: 20px; background: #fff; border-left: 4px solid #dc2626; border-radius: 4px;"><strong style="color: #dc2626;">Technical Details:</strong><p style="margin: 10px 0 0 0; line-height: 1.6;">The HTML being served references TypeScript source files (.tsx) instead of compiled JavaScript bundles. This means GitHub Pages is serving files from the repository root rather than the workflow-generated dist folder. The browser cannot execute TypeScript files and reports a MIME type error (application/octet-stream instead of text/javascript).</p></div></div>';
          }
        }
      })();
    </script>
  </head>
  <body class="bg-gray-100 font-sans">
    <div id="root"></div>
    <!-- Note: Vite will process this HTML during build and replace the .tsx reference with compiled JavaScript -->
    <script type="module" src="./src/main.tsx"></script>
  </body>
</html>